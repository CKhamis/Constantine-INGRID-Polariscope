<!DOCTYPE html>
<html xml:th="https://www.thymeleaf.org">
<head th:replace="~{components/Header :: head('Import Utility')}"></head>
<style>
    body{
        background-image: url("/backgrounds/stripe.svg");
        background-size: 5px;
    }
</style>
<body data-bs-theme="dark">
<!--<div th:replace="~{components/Navigation :: navigation}"></div>-->
<main class="container bg-body px-0 d-flex flex-column" style="height:100vh">
    <nav class="bg-info-subtle p-4">
        <a href="/interpersonal" class="mt-5 text-info-emphasis">< Back to Interpersonal</a>
        <h1 class="fw-bold mb-0 text-info-emphasis">Constantine [IN]GRID Transfer Tool</h1>
    </nav>
    <div class="p-4 flex-grow-1" id="content-container">

    </div>
    <nav style="bottom: 0; width: 100%" class="p-4 bg-body-tertiary" >
        <button type="submit" class="btn btn-info" onclick="submit()" id="submit-button">Submit</button>
        <button type="submit" class="btn btn-info" onclick="renderScreen(-1)" id="prev-button">Previous</button>
        <button type="submit" class="btn btn-info" onclick="renderScreen()" id="next-button">Next</button>
    </nav>

</main>
<div th:replace="~{components/External :: external}"></div>
<div th:replace="~{components/Network :: network}"></div>
<div th:replace="~{components/Network :: data-upload}"></div>
<div th:replace="~{components/ImportScreens :: import-info}"></div>
<script>
    let currentScreenP1 = -1;
    let currentScreenP2 = -1;
    let phase = 0;

    renderScreen();

    function submit(){
        let form = new FormData();
        form.append('file', document.querySelector('#formFileLg').files[0]);
        postDataWithFile("/api/ingrid/upload", form)
    }

    function renderScreen(jump = 1){
        if(phase === 0){
            currentScreenP1 += jump;
            if(currentScreenP1 < 0){
                currentScreenP1 = 0;
            }

            if(currentScreenP1 > 10){
                phase = 1;
            }
            document.querySelector("#content-container").innerHTML = screensP1[currentScreenP1];
        }else if(phase === 1){
            if(currentScreenP2 < 0){
                currentScreenP2 = 0;
            }
            document.querySelector("#content-container").innerHTML = "next phase";
        }

    }
</script>
</body>
</html>